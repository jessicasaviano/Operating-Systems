python3 shell_test.py


Failed test 'trivial command, exit status 2 (check for command name)'
Test input:
  test/exit2.sh
  exit
Actual stdout:
  > > test/exit2.sh exit status: 0
  > 
Actual stderr:
  test/exit2.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > test/exit2.sh.*exit status: 2.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> test/exit2.sh.*exit status: 2.*] in line [> > test/exit2.sh exit status: 0]
  in stdout: could not find a match for pattern [> test/exit2.sh.*exit status: 2.*] in line [> ]
  in stdout: could not find match for pattern [> test/exit2.sh.*exit status: 2.*] in ['> > test/exit2.sh exit status: 0', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/exit2.sh: No such file or directory']]





Failed test 'trivial command, exit status 2 (do not check for command name)'
Test input:
  test/exit2.sh
  exit
Actual stdout:
  > > test/exit2.sh exit status: 0
  > 
Actual stderr:
  test/exit2.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > .*exit status: 2.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> .*exit status: 2.*] in line [> > test/exit2.sh exit status: 0]
  in stdout: could not find a match for pattern [> .*exit status: 2.*] in line [> ]
  in stdout: could not find match for pattern [> .*exit status: 2.*] in ['> > test/exit2.sh exit status: 0', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/exit2.sh: No such file or directory']]





Failed test 'only redirections is invalid'
Test input:
  > foo.txt < test/input.txt
  exit
Actual stdout:
  > 
Actual stderr:
  main.cc:137:15: runtime error: null pointer passed as argument 1, which is declared to never be null
  Bad address
  /usr/include/c++/11/debug/vector:438:
  In function:
      std::debug::vector<_Tp, _Allocator>::reference std::debug::vector<_Tp, 
  [plus 14 more lines, not shown]
Expected stdout regular expression pattern: (extra lines allowed)
  <empty>
Expected stderr regular expression pattern: (extra lines allowed)
  .*invalid command.*
Errors:
  in stderr: could not find match for pattern [.*invalid command.*] in ['main.cc:137:15: runtime error: null pointer passed as argument 1, which is declared to never be null', 'Bad address', '/usr/include/c++/11/debug/vector:438:', 'In function:', '    std::debug::vector<_Tp, _Allocator>::reference std::debug::vector<_Tp, ', '    _Allocator>::operator[](std::debug::vector<_Tp, _Allocator>::size_type) ', '    [with _Tp = std::cxx11::basic_string<char>; _Allocator = ', '    std::allocator<std::cxx11::basic_string<char> >; std::debug::vector<_Tp, ', '    _Allocator>::reference = std::cxx11::basic_string<char>&; std::', '    debug::vector<_Tp, _Allocator>::size_type = long unsigned int]', '', 'Error: attempt to subscript container with out-of-bounds index 0, but ', 'container only holds 0 elements.', '', 'Objects involved in the operation:', '    sequence "this" @ 0x7ffd7c10d8a0 {', '      type = std::debug::vector<std::cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >;', '    }'] found_match = False actual_index = 18 len(actual_lines) = 18





Failed test 'redirection from nothing is invalid'
Test input:
  /bin/true < 
  exit
Actual stdout:
  > /bin/true exit status: 0
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  <empty>
Expected stderr regular expression pattern: (extra lines allowed)
  .*invalid command.*
Errors:
  in stderr: could not find match for pattern [.*invalid command.*] in [] found_match = False actual_index = 0 len(actual_lines) = 0





Failed test 'pass arguments'
Test input:
  test/argument_test.sh first second_with_underscore third
  exit
Actual stdout:
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > 
  number of arguments: 3
  argument 1: first
  argument 2: second_with_underscore
  argument 3: third
  [plus 3 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 3] in [] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]





Failed test 'pass arguments (do not check for exit status)'
Test input:
  test/argument_test.sh first second_with_underscore third
  exit
Actual stdout:
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > 
  number of arguments: 3
  argument 1: first
  argument 2: second_with_underscore
  argument 3: third
  [plus 2 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [number of arguments: 3] in [] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]





Failed test '" is not quote'
Test input:
  test/argument_test.sh "not quoted"
  exit
Actual stdout:
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > 
  number of arguments: 2
  argument 1: "not
  argument 2: quoted"
  argument 3: 
  [plus 3 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 2] in [] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]





Failed test 'varying argument counts and lengths'
Test input:
  test/argument_test.sh aX bX cX dX eX
  test/argument_test.sh f g hZZ i
  test/argument_test.sh j k l
  exit
Actual stdout:
  > > > > test/argument_test.sh exit status: 0
  > test/argument_test.sh exit status: 0
  > > test/argument_test.sh exit status: 0
  > test/argument_test.sh exit status: 0
  > > > test/argument_test.sh exit status: 0
  [plus 3 more lines, not shown]
Actual stderr:
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  [plus 3 more lines, not shown]
Expected stdout regular expression pattern:
  > 
  number of arguments: 5
  argument 1: aX
  argument 2: bX
  argument 3: cX
  [plus 17 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > > > test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> > > test/argument_test.sh exit status: 0]
  [plus 4 more lines, not shown]





Failed test 'varying command lengths (1)'
Test input:
  ./test/argument_test.sh a b c d e
  /bin/echo f g h i
  test/argument_test.sh j k l
  exit
Actual stdout:
  > > f g h i
  /bin/echo exit status: 0
  > > test/argument_test.sh exit status: 0
  > ./test/argument_test.sh exit status: 0
  > f g h i
  [plus 3 more lines, not shown]
Actual stderr:
  ./test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > 
  number of arguments: 5
  argument 1: a
  argument 2: b
  argument 3: c
  [plus 12 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > f g h i]
  in stdout: could not find a match for pattern [> ] in line [/bin/echo exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> ./test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> f g h i]
  [plus 4 more lines, not shown]





Failed test 'varying command lengths (1) (do not check for exit status)'
Test input:
  ./test/argument_test.sh a b c d e
  /bin/echo f g h i
  test/argument_test.sh j k l
  exit
Actual stdout:
  > > f g h i
  /bin/echo exit status: 0
  > > test/argument_test.sh exit status: 0
  > ./test/argument_test.sh exit status: 0
  > f g h i
  [plus 3 more lines, not shown]
Actual stderr:
  ./test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > 
  number of arguments: 5
  argument 1: a
  argument 2: b
  argument 3: c
  [plus 9 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [number of arguments: 5] in [] found_match = False actual_index = 8 len(actual_lines) = 8
  in stderr: unexpected extra output [['./test/argument_test.sh: No such file or directory', 'test/argument_test.sh: No such file or directory', 'test/argument_test.sh: No such file or directory']]





Failed test 'varying command lengths (2)'
Test input:
  /bin/echo f g h i
  ./test/argument_test.sh aXX bXX cXX dXX eXX
  test/argument_test.sh j k l
  exit
Actual stdout:
  > f g h i
  /bin/echo exit status: 0
  > > > test/argument_test.sh exit status: 0
  > ./test/argument_test.sh exit status: 0
  > > test/argument_test.sh exit status: 0
  [plus 1 more lines, not shown]
Actual stderr:
  ./test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > f g h i
  .*exit status: 0.*
  > 
  number of arguments: 5
  argument 1: aXX
  [plus 12 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > > test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> ./test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 5] in [] found_match = False actual_index = 6 len(actual_lines) = 6
  in stderr: unexpected extra output [['./test/argument_test.sh: No such file or directory', 'test/argument_test.sh: No such file or directory', 'test/argument_test.sh: No such file or directory']]





Failed test 'lots of arguments'
Test input:
  /bin/echo short
  test/argument_test.sh A B C D E F G H I J K L M N O P Q R S T
  exit
Actual stdout:
  > short
  /bin/echo exit status: 0
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > short
  .*exit status: 0.*
  > 
  number of arguments: 20
  argument 1: A
  [plus 5 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 20] in [] found_match = False actual_index = 4 len(actual_lines) = 4
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]





Failed test 'lots of arguments (with command names)'
Test input:
  /bin/echo short
  test/argument_test.sh A B C D E F G H I J K L M N O P Q R S T
  exit
Actual stdout:
  > short
  /bin/echo exit status: 0
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > short
  /bin/echo.*exit status: 0.*
  > 
  number of arguments: 20
  argument 1: A
  [plus 5 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 20] in [] found_match = False actual_index = 4 len(actual_lines) = 4
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]



Sanitizer output (main process) for test fork fails:
  ==2856500==LeakSanitizer has encountered a fatal error.
  ==2856500==HINT: For debugging, try setting environment variable LSAN_OPTIONS=verbosity=1:log_threads=1
  ==2856500==HINT: LeakSanitizer does not work under ptrace (strace, gdb, etc)


Failed test 'redirect stdout does not redirect stderr'
Test input:
  test/sample_outputs.sh > test/redirect-stdout-output.txt
  exit
Actual stdout:
  > test/sample_outputs.sh exit status: 0
  > 
Actual stderr:
  test/sample_outputs.sh: No such file or directory
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  This is the contents of stderr.
Errors:
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find match for pattern [This is the contents of stderr.] in ['test/sample_outputs.sh: No such file or directory'] found_match = False actual_index = 1 len(actual_lines) = 1
  in created file test/redirect-stdout-output.txt: could not find a match for pattern [This is the contents of stdout.] in line [> ]
  in created file test/redirect-stdout-output.txt: could not find match for pattern [This is the contents of stdout.] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'redirect in middle of command'
Test input:
  /bin/echo testing one two > test/redirect-stdout-output.txt three 
  exit
Actual stdout:
  > /bin/echo testing one two > test/redirect-stdout-output.txt three : exit status: 255
  > 
Actual stderr:
  invalid command
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> /bin/echo testing one two > test/redirect-stdout-output.txt three : exit status: 255]
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> /bin/echo testing one two > test/redirect-stdout-output.txt three : exit status: 255', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['invalid command']]
  file test/redirect-stdout-output.txt was not created





Failed test 'redirect at beginning of command'
Test input:
  > test/redirect-stdout-output.txt /bin/echo testing one two three 
  exit
Actual stdout:
  > > test/redirect-stdout-output.txt /bin/echo testing one two three : exit status: 255
  > 
Actual stderr:
  invalid command
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> > test/redirect-stdout-output.txt /bin/echo testing one two three : exit status: 255]
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> > test/redirect-stdout-output.txt /bin/echo testing one two three : exit status: 255', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['invalid command']]
  file test/redirect-stdout-output.txt was not created





Failed test 'extra whitespace in redirect at beginning'
Test input:
    >    	test/redirect-stdout-output.txt	  /bin/echo	testing    one   two three 
  exit
Actual stdout:
  >   >    	test/redirect-stdout-output.txt	  /bin/echo	testing    one   two three : exit status: 255
  > 
Actual stderr:
  invalid command
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [>   >    	test/redirect-stdout-output.txt	  /bin/echo	testing    one   two three : exit status: 255]
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['>   >    \ttest/redirect-stdout-output.txt\t  /bin/echo\ttesting    one   two \x0bthree : exit status: 255', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['invalid command']]
  file test/redirect-stdout-output.txt was not created





Failed test 'run example out and exit'
Test input:
  test/example_out.sh
  exit
Actual stdout:
  > > test/example_out.sh exit status: 0
  > 
Actual stderr:
  test/example_out.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > foo bar baz
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [> foo bar baz] in ['> > test/example_out.sh exit status: 0', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/example_out.sh: No such file or directory']]





Failed test 'run sample outputs and exit'
Test input:
  test/sample_outputs.sh
  exit
Actual stdout:
  > > test/sample_outputs.sh exit status: 0
  > 
Actual stderr:
  test/sample_outputs.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > This is the contents of stdout.
Expected stderr regular expression pattern:
  This is the contents of stderr.
Errors:
  in stdout: could not find match for pattern [> This is the contents of stdout.] in ['> > test/sample_outputs.sh exit status: 0', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find match for pattern [This is the contents of stderr.] in ['test/sample_outputs.sh: No such file or directory'] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'run sample outputs, then example out, then sample outputs, then exit'
Test input:
  test/sample_outputs.sh
  test/example_out.sh
  test/sample_outputs.sh
  exit
Actual stdout:
  > > > > test/sample_outputs.sh exit status: 0
  > test/example_out.sh exit status: 0
  > > test/sample_outputs.sh exit status: 0
  > test/sample_outputs.sh exit status: 0
  > > > test/sample_outputs.sh exit status: 0
  [plus 3 more lines, not shown]
Actual stderr:
  test/sample_outputs.sh: No such file or directory
  test/example_out.sh: No such file or directory
  test/sample_outputs.sh: No such file or directory
  test/sample_outputs.sh: No such file or directory
  test/example_out.sh: No such file or directory
  [plus 3 more lines, not shown]
Expected stdout regular expression pattern: (extra lines allowed)
  > This is the contents of stdout.
  > foo bar baz
  > This is the contents of stdout.
  > 
Expected stderr regular expression pattern:
  This is the contents of stderr.
  This is the contents of stderr.
Errors:
  in stdout: could not find match for pattern [> This is the contents of stdout.] in ['> > > > test/sample_outputs.sh exit status: 0', '> test/example_out.sh exit status: 0', '> > test/sample_outputs.sh exit status: 0', '> test/sample_outputs.sh exit status: 0', '> > > test/sample_outputs.sh exit status: 0', '> test/example_out.sh exit status: 0', '> > test/sample_outputs.sh exit status: 0', '> '] found_match = False actual_index = 8 len(actual_lines) = 8
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/example_out.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  [plus 4 more lines, not shown]





Failed test 'run sample outputs, then example out, then sample outputs, then exit (no exit statues)'
Test input:
  test/sample_outputs.sh
  test/example_out.sh
  test/sample_outputs.sh
  exit
Actual stdout:
  > > > > test/sample_outputs.sh exit status: 0
  > test/example_out.sh exit status: 0
  > > test/sample_outputs.sh exit status: 0
  > test/sample_outputs.sh exit status: 0
  > > > test/sample_outputs.sh exit status: 0
  [plus 3 more lines, not shown]
Actual stderr:
  test/sample_outputs.sh: No such file or directory
  test/example_out.sh: No such file or directory
  test/sample_outputs.sh: No such file or directory
  test/sample_outputs.sh: No such file or directory
  test/example_out.sh: No such file or directory
  [plus 3 more lines, not shown]
Expected stdout regular expression pattern: (extra lines allowed)
  > This is the contents of stdout.
  > foo bar baz
  > This is the contents of stdout.
  > 
Expected stderr regular expression pattern:
  This is the contents of stderr.
  This is the contents of stderr.
Errors:
  in stdout: could not find match for pattern [> This is the contents of stdout.] in ['> > > > test/sample_outputs.sh exit status: 0', '> test/example_out.sh exit status: 0', '> > test/sample_outputs.sh exit status: 0', '> test/sample_outputs.sh exit status: 0', '> > > test/sample_outputs.sh exit status: 0', '> test/example_out.sh exit status: 0', '> > test/sample_outputs.sh exit status: 0', '> '] found_match = False actual_index = 8 len(actual_lines) = 8
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/example_out.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  [plus 4 more lines, not shown]





Failed test 'redirect stdin, then use other input (no arguments)'
Test input:
  /bin/cat < test/input.txt
  test/statfd0.sh
  exit
Actual stdout:
  > This is an example input file.
  Which has multiple lines.
  /bin/cat exit status: 0
  > > test/statfd0.sh exit status: 0
  > 
Actual stderr:
  test/statfd0.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > This is an example input file.
  Which has multiple lines.
  > fifo
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [> fifo] in ['/bin/cat exit status: 0', '> > test/statfd0.sh exit status: 0', '> '] found_match = False actual_index = 5 len(actual_lines) = 5
  in stderr: unexpected extra output [['test/statfd0.sh: No such file or directory']]





Failed test 'redirect output (no arguments)'
Test input:
  test/example_out.sh > test/redirect-stdout-output.txt
  exit
Actual stdout:
  > test/example_out.sh exit status: 0
  > 
Actual stderr:
  test/example_out.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  <empty>
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stderr: unexpected extra output [['test/example_out.sh: No such file or directory']]
  in created file test/redirect-stdout-output.txt: could not find a match for pattern [foo bar baz] in line [> ]
  in created file test/redirect-stdout-output.txt: could not find match for pattern [foo bar baz] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'redirect output then use normal output (no arguments)'
Test input:
  test/sample_outputs.sh > test/redirect-stdout-output.txt
  test/example_out.sh
  exit
Actual stdout:
  > test/sample_outputs.sh exit status: 0
  > > test/example_out.sh exit status: 0
  > 
Actual stderr:
  test/sample_outputs.sh: No such file or directory
  test/example_out.sh: No such file or directory
  test/example_out.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*foo bar baz
Expected stderr regular expression pattern:
  This is the contents of stderr.
Errors:
  in stdout: could not find match for pattern [.*foo bar baz] in ['> test/sample_outputs.sh exit status: 0', '> > test/example_out.sh exit status: 0', '> '] found_match = False actual_index = 3 len(actual_lines) = 3
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/example_out.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/example_out.sh: No such file or directory]
  in stderr: could not find match for pattern [This is the contents of stderr.] in ['test/sample_outputs.sh: No such file or directory', 'test/example_out.sh: No such file or directory', 'test/example_out.sh: No such file or directory'] found_match = False actual_index = 3 len(actual_lines) = 3
  [plus 3 more lines, not shown]





Failed test 'redirect output truncates file (no arguments)'
Test input:
  test/example_out.sh > test/redirect-stdout-output.txt
  exit
Actual stdout:
  > test/example_out.sh exit status: 0
  > 
Actual stderr:
  test/example_out.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  <empty>
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stderr: unexpected extra output [['test/example_out.sh: No such file or directory']]
  in created file test/redirect-stdout-output.txt: could not find a match for pattern [foo bar baz] in line [> ]
  in created file test/redirect-stdout-output.txt: could not find match for pattern [foo bar baz] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'pipe in the end without a command is invalid'
Test input:
  /bin/ls |
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  <empty>
Expected stderr regular expression pattern: (extra lines allowed)
  .*invalid command.*
Errors:
  in stderr: could not find match for pattern [.*invalid command.*] in [] found_match = False actual_index = 0 len(actual_lines) = 0





Failed test 'fork fails in a pipeline'
Test input:
  /bin/cat | /bin/cat | /bin/cat | /bin/cat
  exit
Actual stdout:
  > 
Actual stderr:
  
Sanitizer output (main process):
  ==2857055==LeakSanitizer has encountered a fatal error.
  ==2857055==HINT: For debugging, try setting environment variable LSAN_OPTIONS=verbosity=1:log_threads=1
  ==2857055==HINT: LeakSanitizer does not work under ptrace (strace, gdb, etc)
Expected stdout regular expression pattern:
  > > 
Expected stderr regular expression pattern: (extra lines allowed)
  .+
(This test also has some important extra setup code that might do something like restrict the number of file descriptors or child processes that can be created.)
Errors:
  in stdout: could not find a match for pattern [> > ] in line [> ]
  in stdout: could not find match for pattern [> > ] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1
  in stderr: could not find match for pattern [.+] in [] found_match = False actual_index = 0 len(actual_lines) = 0





Failed test 'two command pipeline without arguments'
Test input:
  test/example_out.sh | test/example_sed.sh
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*foo XXX baz
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*foo XXX baz] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'two command pipeline without arguments, then use output'
Test input:
  test/example_out.sh | test/example_sed.sh
  test/example_out.sh
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*foo XXX baz
  .*foo bar baz
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*foo XXX baz] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'two command pipeline without arguments twice'
Test input:
  test/example_out.sh | test/example_sed.sh
  test/example_out.sh | test/example_sed2.sh
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*foo XXX baz
  .*foo bar YYY
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*foo XXX baz] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'three command pipeline without arguments (outputs)'
Test input:
  test/example_out.sh | test/example_sed2.sh | test/example_sed.sh
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*foo XXX YYY
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*foo XXX YYY] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'three command pipeline without arguments (status codes)'
Test input:
  test/example_out.sh | test/example_sed2.sh | test/example_sed.sh
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*test/example_out.sh.*exit status:.*0.*
  .*test/example_sed2.sh.*exit status:.*0.*
  .*test/example_sed.sh.*exit status:.*0.*
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*test/example_out.sh.*exit status:.*0.*] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'three command pipeline without arguments where order matters (1)'
Test input:
  test/example_out.sh | test/example_sed2.sh | test/example_sed3.sh
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*foo bar ZZZ
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*foo bar ZZZ] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'three command pipeline without arguments where order matters (2)'
Test input:
  test/example_out.sh | test/example_sed3.sh | test/example_sed2.sh
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*foo bar YYY
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*foo bar YYY] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test '|s without spaces mixed with | with spaces (output)'
Test input:
  /bin/echo this|argument|has|pipes | /bin/sed -e s/argument/XXX/
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*this\|XXX\|has\|pipes
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*this\|XXX\|has\|pipes] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test '|s without spaces mixed with | with spaces (exit statuses)'
Test input:
  /bin/echo this|argument|has|pipes | /bin/sed -e s/argument/XXX/
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*exit status: 0.*
  .*exit status: 0.*
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'simple pipe output'
Test input:
  /bin/echo testing  one two three | /bin/sed -e s/one/XXX/
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*testing XXX two three
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*testing XXX two three] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'simple pipe exit status'
Test input:
  /bin/echo testing one two three | /bin/sed -e s/one/XXX/
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*exit status: 0.*
  .*exit status: 0.*
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'longer pipeline (output)'
Test input:
  /bin/echo testing one two three | /bin/sed -e s/one/XXX/ | /bin/sed -e s/two/YYY/
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*testing XXX YYY three
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*testing XXX YYY three] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'longer pipeline exit status (all 0s)'
Test input:
  /bin/echo testing one two three | /bin/sed -e s/one/xxx/ | /bin/sed -e s/two/yyy/
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*exit status: 0.*
  .*exit status: 0.*
  .*exit status: 0.*
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'pipeline with two exit status 1s and one 0 has 1s'
Test input:
  /bin/true ignored 1 | /bin/false ignored 2 | /bin/false ignored 3
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*exit status: 1.*
  .*exit status: 1.*
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*exit status: 1.*] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'pipeline with two exit status 1s and one 0 has 0'
Test input:
  /bin/true some ignored arugments | /bin/false ignored argument | /bin/false more ignored argument
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*exit status: 0.*
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test '100 pipelines (with limit of 50 open files)'
Test input:
  /bin/echo a test | /bin/sed -e s/test/xxx/
  /bin/echo a test | /bin/sed -e s/test/xxx/
  /bin/echo a test | /bin/sed -e s/test/xxx/
  /bin/echo a test | /bin/sed -e s/test/xxx/
  /bin/echo a test | /bin/sed -e s/test/xxx/
  [plus 96 more lines, not shown]
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*a xxx
  .*a xxx
  .*a xxx
  .*a xxx
  .*a xxx
  [plus 95 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
(This test also has some important extra setup code that might do something like restrict the number of file descriptors or child processes that can be created.)
Errors:
  in stdout: could not find match for pattern [.*a xxx] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'redirect from operator is invalid'
Test input:
  /bin/false < | 
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  > (?:> |/bin/false.*exit status: 255|/bin/false(?!.*exit status:)\s*:)
Expected stderr regular expression pattern: (extra lines allowed)
  .*invalid command.*
Errors:
  in stdout: could not find match for pattern [> (?:> |/bin/false.*exit status: 255|/bin/false(?!.*exit status:)\s*:)] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1
  in stderr: could not find match for pattern [.*invalid command.*] in [] found_match = False actual_index = 0 len(actual_lines) = 0





Failed test 'large amount of data through pipe'
Test input:
  /bin/head -c 1048576 /dev/zero | /bin/cat | /usr/bin/wc -c
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*1048576.*
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*1048576.*] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'pipe with redirect at end'
Test input:
  test/example_out.sh | test/example_sed.sh > test/output.txt
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern:
  > test/example_out.sh.*exit status: 0.*
  test/example_sed.sh.*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> test/example_out.sh.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [> test/example_out.sh.*exit status: 0.*] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1
  file test/output.txt was not created





Failed test 'pipe with redirect at beginning'
Test input:
  /bin/cat < test/input.txt  | /bin/sed s/example/EXAMPLE/
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*This is an EXAMPLE input file.
  .*Which has multiple lines.
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [.*This is an EXAMPLE input file.] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'pipe with redirect at beginning and end'
Test input:
  /bin/cat < test/input.txt  | /bin/sed s/example/EXAMPLE/ > test/output.txt
  exit
Actual stdout:
  > 
Actual stderr:
  
Expected stdout regular expression pattern:
  > /bin/cat.*exit status: 0.*
  /bin/sed.*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> /bin/cat.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [> /bin/cat.*exit status: 0.*] in ['> '] found_match = False actual_index = 1 len(actual_lines) = 1
  file test/output.txt was not created



40 tests passed and 48 tests failed.
---
Note on interpreting test output patterns:
All expected values matched against a "regular expression" where:
    .* means any string (including empty strings)
    .+ means any string (excluding empty strings)
    everything is matched case-insensitively

