python3 shell_test.py


Failed test 'trivial command, exit status 2 (check for command name)'
Test input:
  test/exit2.sh
  exit
Actual stdout:
  > > test/exit2.sh exit status: 0
  > 
Actual stderr:
  test/exit2.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > test/exit2.sh.*exit status: 2.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> test/exit2.sh.*exit status: 2.*] in line [> > test/exit2.sh exit status: 0]
  in stdout: could not find a match for pattern [> test/exit2.sh.*exit status: 2.*] in line [> ]
  in stdout: could not find match for pattern [> test/exit2.sh.*exit status: 2.*] in ['> > test/exit2.sh exit status: 0', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/exit2.sh: No such file or directory']]





Failed test 'trivial command, exit status 2 (do not check for command name)'
Test input:
  test/exit2.sh
  exit
Actual stdout:
  > > test/exit2.sh exit status: 0
  > 
Actual stderr:
  test/exit2.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > .*exit status: 2.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> .*exit status: 2.*] in line [> > test/exit2.sh exit status: 0]
  in stdout: could not find a match for pattern [> .*exit status: 2.*] in line [> ]
  in stdout: could not find match for pattern [> .*exit status: 2.*] in ['> > test/exit2.sh exit status: 0', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/exit2.sh: No such file or directory']]





Failed test 'only redirections is invalid'
Test input:
  > foo.txt < test/input.txt
  exit
Actual stdout:
  > 
Actual stderr:
  couldn't open file
  /usr/include/c++/11/debug/vector:438:
  In function:
      std::debug::vector<_Tp, _Allocator>::reference std::debug::vector<_Tp, 
      _Allocator>::operator[](std::debug::vector<_Tp, _Allocator>::size_type) 
  [plus 13 more lines, not shown]
Expected stdout regular expression pattern: (extra lines allowed)
  <empty>
Expected stderr regular expression pattern: (extra lines allowed)
  .*invalid command.*
Errors:
  in stderr: could not find match for pattern [.*invalid command.*] in ["couldn't open file", '/usr/include/c++/11/debug/vector:438:', 'In function:', '    std::debug::vector<_Tp, _Allocator>::reference std::debug::vector<_Tp, ', '    _Allocator>::operator[](std::debug::vector<_Tp, _Allocator>::size_type) ', '    [with _Tp = std::cxx11::basic_string<char>; _Allocator = ', '    std::allocator<std::cxx11::basic_string<char> >; std::debug::vector<_Tp, ', '    _Allocator>::reference = std::cxx11::basic_string<char>&; std::', '    debug::vector<_Tp, _Allocator>::size_type = long unsigned int]', '', 'Error: attempt to subscript container with out-of-bounds index 0, but ', 'container only holds 0 elements.', '', 'Objects involved in the operation:', '    sequence "this" @ 0x7ffe90e1e320 {', '      type = std::debug::vector<std::cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >;', '    }'] found_match = False actual_index = 17 len(actual_lines) = 17





Failed test 'redirection from nothing is invalid'
Test input:
  /bin/true < 
  exit
Actual stdout:
  > /bin/true exit status: 0
  > 
Actual stderr:
  
Expected stdout regular expression pattern: (extra lines allowed)
  <empty>
Expected stderr regular expression pattern: (extra lines allowed)
  .*invalid command.*
Errors:
  in stderr: could not find match for pattern [.*invalid command.*] in [] found_match = False actual_index = 0 len(actual_lines) = 0





Failed test 'pass arguments'
Test input:
  test/argument_test.sh first second_with_underscore third
  exit
Actual stdout:
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > 
  number of arguments: 3
  argument 1: first
  argument 2: second_with_underscore
  argument 3: third
  [plus 3 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 3] in [] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]





Failed test 'pass arguments (do not check for exit status)'
Test input:
  test/argument_test.sh first second_with_underscore third
  exit
Actual stdout:
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > 
  number of arguments: 3
  argument 1: first
  argument 2: second_with_underscore
  argument 3: third
  [plus 2 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [number of arguments: 3] in [] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]





Failed test '" is not quote'
Test input:
  test/argument_test.sh "not quoted"
  exit
Actual stdout:
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > 
  number of arguments: 2
  argument 1: "not
  argument 2: quoted"
  argument 3: 
  [plus 3 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 2] in [] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]





Failed test 'varying argument counts and lengths'
Test input:
  test/argument_test.sh aX bX cX dX eX
  test/argument_test.sh f g hZZ i
  test/argument_test.sh j k l
  exit
Actual stdout:
  > > > > test/argument_test.sh exit status: 0
  > test/argument_test.sh exit status: 0
  > > test/argument_test.sh exit status: 0
  > test/argument_test.sh exit status: 0
  > > > test/argument_test.sh exit status: 0
  [plus 3 more lines, not shown]
Actual stderr:
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  [plus 3 more lines, not shown]
Expected stdout regular expression pattern:
  > 
  number of arguments: 5
  argument 1: aX
  argument 2: bX
  argument 3: cX
  [plus 17 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > > > test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> > > test/argument_test.sh exit status: 0]
  [plus 4 more lines, not shown]





Failed test 'varying command lengths (1)'
Test input:
  ./test/argument_test.sh a b c d e
  /bin/echo f g h i
  test/argument_test.sh j k l
  exit
Actual stdout:
  > > f g h i
  /bin/echo exit status: 0
  > > test/argument_test.sh exit status: 0
  > ./test/argument_test.sh exit status: 0
  > f g h i
  [plus 3 more lines, not shown]
Actual stderr:
  ./test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > 
  number of arguments: 5
  argument 1: a
  argument 2: b
  argument 3: c
  [plus 12 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > f g h i]
  in stdout: could not find a match for pattern [> ] in line [/bin/echo exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> ./test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> f g h i]
  [plus 4 more lines, not shown]





Failed test 'varying command lengths (1) (do not check for exit status)'
Test input:
  ./test/argument_test.sh a b c d e
  /bin/echo f g h i
  test/argument_test.sh j k l
  exit
Actual stdout:
  > > f g h i
  /bin/echo exit status: 0
  > > test/argument_test.sh exit status: 0
  > ./test/argument_test.sh exit status: 0
  > f g h i
  [plus 3 more lines, not shown]
Actual stderr:
  ./test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > 
  number of arguments: 5
  argument 1: a
  argument 2: b
  argument 3: c
  [plus 9 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [number of arguments: 5] in [] found_match = False actual_index = 8 len(actual_lines) = 8
  in stderr: unexpected extra output [['./test/argument_test.sh: No such file or directory', 'test/argument_test.sh: No such file or directory', 'test/argument_test.sh: No such file or directory']]





Failed test 'varying command lengths (2)'
Test input:
  /bin/echo f g h i
  ./test/argument_test.sh aXX bXX cXX dXX eXX
  test/argument_test.sh j k l
  exit
Actual stdout:
  > f g h i
  /bin/echo exit status: 0
  > > > test/argument_test.sh exit status: 0
  > ./test/argument_test.sh exit status: 0
  > > test/argument_test.sh exit status: 0
  [plus 1 more lines, not shown]
Actual stderr:
  ./test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > f g h i
  .*exit status: 0.*
  > 
  number of arguments: 5
  argument 1: aXX
  [plus 12 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > > test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> ./test/argument_test.sh exit status: 0]
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 5] in [] found_match = False actual_index = 6 len(actual_lines) = 6
  in stderr: unexpected extra output [['./test/argument_test.sh: No such file or directory', 'test/argument_test.sh: No such file or directory', 'test/argument_test.sh: No such file or directory']]





Failed test 'lots of arguments'
Test input:
  /bin/echo short
  test/argument_test.sh A B C D E F G H I J K L M N O P Q R S T
  exit
Actual stdout:
  > short
  /bin/echo exit status: 0
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > short
  .*exit status: 0.*
  > 
  number of arguments: 20
  argument 1: A
  [plus 5 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 20] in [] found_match = False actual_index = 4 len(actual_lines) = 4
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]





Failed test 'lots of arguments (with command names)'
Test input:
  /bin/echo short
  test/argument_test.sh A B C D E F G H I J K L M N O P Q R S T
  exit
Actual stdout:
  > short
  /bin/echo exit status: 0
  > > test/argument_test.sh exit status: 0
  > 
Actual stderr:
  test/argument_test.sh: No such file or directory
  
Expected stdout regular expression pattern:
  > short
  /bin/echo.*exit status: 0.*
  > 
  number of arguments: 20
  argument 1: A
  [plus 5 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [> ] in line [> > test/argument_test.sh exit status: 0]
  in stdout: could not find match for pattern [number of arguments: 20] in [] found_match = False actual_index = 4 len(actual_lines) = 4
  in stderr: unexpected extra output [['test/argument_test.sh: No such file or directory']]



Sanitizer output (main process) for test fork fails:
  ==2853767==LeakSanitizer has encountered a fatal error.
  ==2853767==HINT: For debugging, try setting environment variable LSAN_OPTIONS=verbosity=1:log_threads=1
  ==2853767==HINT: LeakSanitizer does not work under ptrace (strace, gdb, etc)


Failed test 'redirect stdout'
Test input:
  /bin/echo testing one two three > test/redirect-stdout-output.txt
  exit
Actual stdout:
  > /bin/echo exit status: 1
  > 
Actual stderr:
  couldn't open file
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> /bin/echo exit status: 1]
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> /bin/echo exit status: 1', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [["couldn't open file"]]
  file test/redirect-stdout-output.txt was not created





Failed test 'redirect stdout (non .txt file)'
Test input:
  /bin/echo testing one two three > test/redirect-stdout-output
  exit
Actual stdout:
  > /bin/echo exit status: 1
  > 
Actual stderr:
  couldn't open file
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> /bin/echo exit status: 1]
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> /bin/echo exit status: 1', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [["couldn't open file"]]
  file test/redirect-stdout-output was not created





Failed test 'redirect stdout does not redirect stderr'
Test input:
  test/sample_outputs.sh > test/redirect-stdout-output.txt
  exit
Actual stdout:
  > test/sample_outputs.sh exit status: 1
  > 
Actual stderr:
  couldn't open file
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  This is the contents of stderr.
Errors:
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> test/sample_outputs.sh exit status: 1]
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> test/sample_outputs.sh exit status: 1', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [couldn't open file]
  in stderr: could not find match for pattern [This is the contents of stderr.] in ["couldn't open file"] found_match = False actual_index = 1 len(actual_lines) = 1
  [plus 1 more lines, not shown]





Failed test 'redirect in middle of command'
Test input:
  /bin/echo testing one two > test/redirect-stdout-output.txt three 
  exit
Actual stdout:
  > /bin/echo testing one two > test/redirect-stdout-output.txt three : exit status: 255
  > 
Actual stderr:
  invalid command
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> /bin/echo testing one two > test/redirect-stdout-output.txt three : exit status: 255]
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> /bin/echo testing one two > test/redirect-stdout-output.txt three : exit status: 255', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['invalid command']]
  file test/redirect-stdout-output.txt was not created





Failed test 'redirect at beginning of command'
Test input:
  > test/redirect-stdout-output.txt /bin/echo testing one two three 
  exit
Actual stdout:
  > > test/redirect-stdout-output.txt /bin/echo testing one two three : exit status: 255
  > 
Actual stderr:
  invalid command
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> > test/redirect-stdout-output.txt /bin/echo testing one two three : exit status: 255]
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> > test/redirect-stdout-output.txt /bin/echo testing one two three : exit status: 255', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['invalid command']]
  file test/redirect-stdout-output.txt was not created





Failed test 'extra whitespace in redirect at beginning'
Test input:
    >    	test/redirect-stdout-output.txt	  /bin/echo	testing    one   two three 
  exit
Actual stdout:
  >   >    	test/redirect-stdout-output.txt	  /bin/echo	testing    one   two three : exit status: 255
  > 
Actual stderr:
  invalid command
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [>   >    	test/redirect-stdout-output.txt	  /bin/echo	testing    one   two three : exit status: 255]
  in stdout: could not find a match for pattern [.*exit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['>   >    \ttest/redirect-stdout-output.txt\t  /bin/echo\ttesting    one   two \x0bthree : exit status: 255', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['invalid command']]
  file test/redirect-stdout-output.txt was not created





Failed test 'redirect output truncates file'
Test input:
  /bin/echo testing one two three > test/redirect-stdout-output.txt
  exit
Actual stdout:
  > /bin/echo exit status: 0
  > 
Actual stderr:
  
Expected stdout regular expression pattern:
  .*exit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in created file test/redirect-stdout-output.txt: unexpected extra output [['meant to ensure that echo', 'will not overwrite it if the shell does not open', 'the file with O_TRUNC.', 'This is a long string meant to ensure that echo', 'will not overwrite it if the shell does not open', 'the file with O_TRUNC.']]





Failed test '100 output redirections (with limit of 50 open files)'
Test input:
  /bin/echo valuefrom0 > test/redirect-output-0
  /bin/echo valuefrom1 > test/redirect-output-1
  /bin/echo valuefrom2 > test/redirect-output-2
  /bin/echo valuefrom3 > test/redirect-output-3
  /bin/echo valuefrom4 > test/redirect-output-4
  [plus 96 more lines, not shown]
Actual stdout:
  > /bin/echo exit status: 1
  > /bin/echo exit status: 1
  > /bin/echo exit status: 1
  > /bin/echo exit status: 1
  > /bin/echo exit status: 1
  [plus 96 more lines, not shown]
Actual stderr:
  couldn't open file
  couldn't open file
  couldn't open file
  couldn't open file
  couldn't open file
  [plus 96 more lines, not shown]
Expected stdout regular expression pattern: (extra lines allowed)
  .*exit status: 0.*
  .*exit status: 0.*
  .*exit status: 0.*
  .*exit status: 0.*
  .*exit status: 0.*
  [plus 95 more lines, not shown]
Expected stderr regular expression pattern:
  <empty>
(This test also has some important extra setup code that might do something like restrict the number of file descriptors or child processes that can be created.)
Errors:
  in stdout: could not find match for pattern [.*exit status: 0.*] in ['> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> /bin/echo exit status: 1', '> '] found_match = False actual_index = 101 len(actual_lines) = 101
  in stderr: unexpected extra output [["couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file", "couldn't open file"]]
  file test/redirect-output-0 was not created
  file test/redirect-output-1 was not created
  file test/redirect-output-10 was not created
  [plus 97 more lines, not shown]





Failed test 'run example out and exit'
Test input:
  test/example_out.sh
  exit
Actual stdout:
  > > test/example_out.sh exit status: 0
  > 
Actual stderr:
  test/example_out.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > foo bar baz
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [> foo bar baz] in ['> > test/example_out.sh exit status: 0', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [['test/example_out.sh: No such file or directory']]





Failed test 'run sample outputs and exit'
Test input:
  test/sample_outputs.sh
  exit
Actual stdout:
  > > test/sample_outputs.sh exit status: 0
  > 
Actual stderr:
  test/sample_outputs.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > This is the contents of stdout.
Expected stderr regular expression pattern:
  This is the contents of stderr.
Errors:
  in stdout: could not find match for pattern [> This is the contents of stdout.] in ['> > test/sample_outputs.sh exit status: 0', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find match for pattern [This is the contents of stderr.] in ['test/sample_outputs.sh: No such file or directory'] found_match = False actual_index = 1 len(actual_lines) = 1





Failed test 'run sample outputs, then example out, then sample outputs, then exit'
Test input:
  test/sample_outputs.sh
  test/example_out.sh
  test/sample_outputs.sh
  exit
Actual stdout:
  > > > > test/sample_outputs.sh exit status: 0
  > test/example_out.sh exit status: 0
  > > test/sample_outputs.sh exit status: 0
  > test/sample_outputs.sh exit status: 0
  > > > test/sample_outputs.sh exit status: 0
  [plus 3 more lines, not shown]
Actual stderr:
  test/sample_outputs.sh: No such file or directory
  test/example_out.sh: No such file or directory
  test/sample_outputs.sh: No such file or directory
  test/sample_outputs.sh: No such file or directory
  test/example_out.sh: No such file or directory
  [plus 3 more lines, not shown]
Expected stdout regular expression pattern: (extra lines allowed)
  > This is the contents of stdout.
  > foo bar baz
  > This is the contents of stdout.
  > 
Expected stderr regular expression pattern:
  This is the contents of stderr.
  This is the contents of stderr.
Errors:
  in stdout: could not find match for pattern [> This is the contents of stdout.] in ['> > > > test/sample_outputs.sh exit status: 0', '> test/example_out.sh exit status: 0', '> > test/sample_outputs.sh exit status: 0', '> test/sample_outputs.sh exit status: 0', '> > > test/sample_outputs.sh exit status: 0', '> test/example_out.sh exit status: 0', '> > test/sample_outputs.sh exit status: 0', '> '] found_match = False actual_index = 8 len(actual_lines) = 8
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/example_out.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  [plus 4 more lines, not shown]





Failed test 'run sample outputs, then example out, then sample outputs, then exit (no exit statues)'
Test input:
  test/sample_outputs.sh
  test/example_out.sh
  test/sample_outputs.sh
  exit
Actual stdout:
  > > > > test/sample_outputs.sh exit status: 0
  > test/example_out.sh exit status: 0
  > > test/sample_outputs.sh exit status: 0
  > test/sample_outputs.sh exit status: 0
  > > > test/sample_outputs.sh exit status: 0
  [plus 3 more lines, not shown]
Actual stderr:
  test/sample_outputs.sh: No such file or directory
  test/example_out.sh: No such file or directory
  test/sample_outputs.sh: No such file or directory
  test/sample_outputs.sh: No such file or directory
  test/example_out.sh: No such file or directory
  [plus 3 more lines, not shown]
Expected stdout regular expression pattern: (extra lines allowed)
  > This is the contents of stdout.
  > foo bar baz
  > This is the contents of stdout.
  > 
Expected stderr regular expression pattern:
  This is the contents of stderr.
  This is the contents of stderr.
Errors:
  in stdout: could not find match for pattern [> This is the contents of stdout.] in ['> > > > test/sample_outputs.sh exit status: 0', '> test/example_out.sh exit status: 0', '> > test/sample_outputs.sh exit status: 0', '> test/sample_outputs.sh exit status: 0', '> > > test/sample_outputs.sh exit status: 0', '> test/example_out.sh exit status: 0', '> > test/sample_outputs.sh exit status: 0', '> '] found_match = False actual_index = 8 len(actual_lines) = 8
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/example_out.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/sample_outputs.sh: No such file or directory]
  [plus 4 more lines, not shown]





Failed test 'redirect stdin, then use other input (no arguments)'
Test input:
  /bin/cat < test/input.txt
  test/statfd0.sh
  exit
Actual stdout:
  > This is an example input file.
  Which has multiple lines.
  /bin/cat exit status: 0
  > > test/statfd0.sh exit status: 0
  > 
Actual stderr:
  test/statfd0.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  > This is an example input file.
  Which has multiple lines.
  > fifo
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find match for pattern [> fifo] in ['/bin/cat exit status: 0', '> > test/statfd0.sh exit status: 0', '> '] found_match = False actual_index = 5 len(actual_lines) = 5
  in stderr: unexpected extra output [['test/statfd0.sh: No such file or directory']]





Failed test 'redirect output (no arguments)'
Test input:
  test/example_out.sh > test/redirect-stdout-output.txt
  exit
Actual stdout:
  > test/example_out.sh exit status: 1
  > 
Actual stderr:
  couldn't open file
  
Expected stdout regular expression pattern: (extra lines allowed)
  <empty>
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stderr: unexpected extra output [["couldn't open file"]]
  file test/redirect-stdout-output.txt was not created





Failed test 'redirect output then use normal output (no arguments)'
Test input:
  test/sample_outputs.sh > test/redirect-stdout-output.txt
  test/example_out.sh
  exit
Actual stdout:
  > test/sample_outputs.sh exit status: 1
  > > test/example_out.sh exit status: 0
  > 
Actual stderr:
  couldn't open file
  test/example_out.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  .*foo bar baz
Expected stderr regular expression pattern:
  This is the contents of stderr.
Errors:
  in stdout: could not find match for pattern [.*foo bar baz] in ['> test/sample_outputs.sh exit status: 1', '> > test/example_out.sh exit status: 0', '> '] found_match = False actual_index = 3 len(actual_lines) = 3
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [couldn't open file]
  in stderr: could not find a match for pattern [This is the contents of stderr.] in line [test/example_out.sh: No such file or directory]
  in stderr: could not find match for pattern [This is the contents of stderr.] in ["couldn't open file", 'test/example_out.sh: No such file or directory'] found_match = False actual_index = 2 len(actual_lines) = 2
  file test/redirect-stdout-output.txt was not created





Failed test 'redirect output truncates file (no arguments)'
Test input:
  test/example_out.sh > test/redirect-stdout-output.txt
  exit
Actual stdout:
  > test/example_out.sh exit status: 0
  > 
Actual stderr:
  test/example_out.sh: No such file or directory
  
Expected stdout regular expression pattern: (extra lines allowed)
  <empty>
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stderr: unexpected extra output [['test/example_out.sh: No such file or directory']]
  in created file test/redirect-stdout-output.txt: could not find a match for pattern [foo bar baz] in line [> is is a long string meant to ensure that echo]
  in created file test/redirect-stdout-output.txt: could not find a match for pattern [foo bar baz] in line [will not overwrite it if the shell does not open]
  in created file test/redirect-stdout-output.txt: could not find a match for pattern [foo bar baz] in line [the file with O_TRUNC.]
  in created file test/redirect-stdout-output.txt: could not find a match for pattern [foo bar baz] in line [This is a long string meant to ensure that echo]
  [plus 3 more lines, not shown]





Failed test 'redirect stdin and stdout'
Test input:
  /bin/cat < test/redirect-input.txt > test/redirect-output.txt
  exit
Actual stdout:
  > /bin/cat exit status: 1
  > 
Actual stderr:
  couldn't open file
  
Expected stdout regular expression pattern:
  .*[Ee]xit status: 0.*
  > 
Expected stderr regular expression pattern:
  <empty>
Errors:
  in stdout: could not find a match for pattern [.*[Ee]xit status: 0.*] in line [> /bin/cat exit status: 1]
  in stdout: could not find a match for pattern [.*[Ee]xit status: 0.*] in line [> ]
  in stdout: could not find match for pattern [.*[Ee]xit status: 0.*] in ['> /bin/cat exit status: 1', '> '] found_match = False actual_index = 2 len(actual_lines) = 2
  in stderr: unexpected extra output [["couldn't open file"]]
  file test/redirect-output.txt was not created





35 tests passed and 53 tests failed.
---
Note on interpreting test output patterns:
All expected values matched against a "regular expression" where:
    .* means any string (including empty strings)
    .+ means any string (excluding empty strings)
    everything is matched case-insensitively

